<html>
<head>
  <title>Modeling and Inferring Sound Changes (MISOL)</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <script src="misol.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="misol.css" />
</head>
<body>

  <textarea cols="40" row="30" id="sound_classes"></textarea>
  <textarea cols="40" row="30" id="sound_laws"></textarea>
  <button id="parsesounds" onclick="parse_sounds()">Parse Sounds</button>
  <table><tr>
      <td><div id="sound_classes_out"></div><td>
          <td><div id="sound_laws_out"></div></td></tr></table>
</body>
<script>
  function parse_sounds() {
    var i, sound;
    var tf = document.getElementById("sound_classes").value.split("\n");
    var laws = document.getElementById("sound_laws").value.split("\n");
    var cls = new SoundClasses(tf, laws);
    cls.assemble_laws();
    var scls = document.getElementById("sound_classes_out");
    var txt = '<table class="basictable"><th>Class</th><th>Sounds</th></tr>';
    for (this_cls in cls.classes) {
      txt += '<tr><td>'+this_cls+"</td><td>";
      for (i=0; i<cls.classes[this_cls].length; i++) {
        sound = cls.classes[this_cls][i];
        txt += '<span class="sound">'+sound+'</span>'; 
      }
      txt += "</td></tr>";
    }
    txt += "</table>";
    scls.innerHTML = txt;
    var slaws = document.getElementById("sound_laws_out");
    txt = '<table class="basictable"><tr><th>ID</th><th>Law</th><th>Source</th><th>Target</th></tr>';
    for (i=0; i<Object.keys(cls.raw_laws).length; i++) {
      for (j=0; j<cls.laws2tiers[i+1].length; j++) {
        txt += "<tr><td>"+(i+1)+"</td><td>"+cls.raw_laws[(i+1)]+"</td><td>"+cls.laws2tiers[i+1][j]["source"]+"</td><td>"+cls.laws2tiers[i+1][j]["target"]+"</td></tr>";
      }
    }
    txt += "</table>";
    slaws.innerHTML = txt;
    console.log(cls);
    return cls;
  }
</script>

</html>
